---
import Layout from "../layouts/Layout.astro";
import { IProduct } from "../types";
import ProductCard from "../components/ProductCard";
import Visible  from "../components/Visible";

const response = await fetch("https://fakestoreapi.com/products/");

const products = (await response.json()) as IProduct[];
---

<Layout title="Products">
  <h1 class="text-2xl font-bold my-4">Products page</h1>

  {products.map((prod) => <ProductCard client:load product={prod} />)}

  <Visible client:load />
</Layout>
